(this["webpackJsonpreact-redux-sui-online-store"]=this["webpackJsonpreact-redux-sui-online-store"]||[]).push([[0],{180:function(e){e.exports=JSON.parse('[{"id":12587,"name":"Oranges from the sunny Naples. Price is per kilo.","details":"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Nisi scelerisque eu ultrices vitae auctor. Tellus cras adipiscing enim eu turpis egestas pretium. Amet dictum sit amet justo donec enim.","price":1.99,"inventory":100},{"id":16241,"name":"A plate of fruit with orange, strawberry, apple, and grapes.","details":"Dignissim suspendisse in est ante in nibh mauris. Integer quis auctor elit sed vulputate mi sit. Ac orci phasellus egestas tellus rutrum tellus pellentesque eu. Vitae auctor eu augue ut lectus arcu bibendum. Nisi lacus sed viverra tellus in.","price":8.99,"inventory":15},{"id":16328,"name":"A cluster of five to six tomatoes weighing around 400g.","details":"Ipsum dolor sit amet consectetur adipiscing. Velit aliquet sagittis id consectetur purus. Et sollicitudin ac orci phasellus egestas tellus rutrum tellus pellentesque. Arcu ac tortor dignissim convallis aenean et tortor at. Semper auctor neque vitae tempus quam pellentesque.","price":2.99,"inventory":50},{"id":24805,"name":"A fruit salad with sliced strawberries, cantaloupe melon, kiwi fruit, pineapple, and grapes.","details":"Maecenas pharetra convallis posuere morbi leo urna molestie at. Rhoncus urna neque viverra justo nec ultrices dui. Facilisi nullam vehicula ipsum a. Pretium lectus quam id leo in. Nulla porttitor massa id neque aliquam vestibulum morbi blandit cursus. Sed risus ultricies tristique nulla.","price":9.99,"inventory":10},{"id":24806,"name":"A bowl of fruit with honey melon, blueberry, and blackberry.","details":"Mi quis hendrerit dolor magna. Ornare massa eget egestas purus viverra accumsan in. Platea dictumst quisque sagittis purus sit amet volutpat consequat. Consectetur adipiscing elit pellentesque habitant. Quisque sagittis purus sit amet volutpat consequat mauris nunc.","price":7.99,"inventory":20},{"id":93779,"name":"Strawberries! Picked fresh every day. Price per litre.","details":"Rhoncus urna neque viverra justo nec ultrices dui sapien. Odio aenean sed adipiscing diam donec adipiscing tristique. Nisl pretium fusce id velit. At tempor commodo ullamcorper a lacus vestibulum sed.","price":4.99,"inventory":30}]')},199:function(e,t,r){},213:function(e,t,r){},299:function(e,t,r){"use strict";r.r(t);r(194);var n=r(0),c=r(40),a=r.n(c);r(199),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=r(15),s=r(8),o=r(77),l=r(20),d=r(21),u=r.n(d),j=r(42),b=r(55),h=r(180),p=r(135),O=r(328),m=window.localStorage,f="me.stenman.orders",x="me.stenman.products",g=function(){return A({resultFunc:function(){m.removeItem(f)}})},v=function(){return A({resultFunc:function(){m.removeItem(x)}})},w=function(e){return A({resultFunc:function(){var t=Object(O.a)(),r=Object(b.a)(Object(b.a)({},e),{},{id:t,date:(new Date).toISOString().substr(0,10),createdAt:Date.now()}),n=T();return n[t]=r,q(n),{order:r}}})},y=function(e){return A({resultFunc:function(){var t=T();return delete t[e],q(t),{deleted:e}}})},C=function(){return A({resultFunc:function(){return{orders:Object.values(T())}}})},I=function(){return A({resultFunc:function(){return{products:Object.values(P())}}})},k=function(e){return A({resultFunc:function(){var t=P();if(e in t)return{product:t[e]};throw new Error("no product found matching id ".concat(e))}})},S=function(e){return A({resultFunc:function(){var t=P();if(e.id in t)return t[e.id]=Object(b.a)(Object(b.a)({},t[e.id]),e),R(t),{updated:t[e.id]};throw new Error("No product found with id ".concat(e.id,"."))}})};function A(e){var t=e.resultFunc,r=void 0===t?function(){}:t,n=e.maxDelay,c=void 0===n?2e3:n,a=e.errorProb,i=void 0===a?0:a;return new Promise((function(e,t){setTimeout((function(){var n=function(e){return Object(p.random)(1,!0)<=e?"A fake API error occurred. Error probability\n        ".concat((100*e).toFixed(),"% is adjustable in client.js."):null}(i);if(n)t(new Error(n));else{var c;try{c=r()}catch(a){t(a)}e(c)}}),Object(p.random)(c))}))}function T(){return JSON.parse(m.getItem(f)||"{}")}function q(e){m.setItem(f,JSON.stringify(e))}function P(){var e=m.getItem(x);return e?JSON.parse(e):function(){var e=h.reduce((function(e,t){return e[t.id]=t,e}),{});return R(e),e}()}function R(e){m.setItem(x,JSON.stringify(e))}var N=Object(l.c)({sortComparer:function(e,t){return e.name.localeCompare(t.name)}}),F="products",E=function(e){return e.products},H=N.getSelectors((function(e){return E(e)})),B=Object(l.b)("products/fetchAllProducts",function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{condition:function(e,t){var r=t.getState,n=E(r());return 0===N.getSelectors().selectTotal(n)&&!n.loading}}),M=Object(l.b)("products/modifyInventory",function(){var e=Object(j.a)(u.a.mark((function e(t){var r,n,c,a,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.productId,n=t.quantity,e.next=3,k(r);case 3:return c=e.sent,a=c.product,i=a.id,s=a.inventory,s+=n,e.abrupt("return",S({id:i,inventory:s}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),D=Object(l.b)("products/clearProducts",Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v());case 1:case"end":return e.stop()}}),e)})))),W=Object(l.d)({name:F,initialState:N.getInitialState({loading:!1,error:null,clearing:!1}),reducers:{},extraReducers:function(e){e.addCase(B.fulfilled,(function(e,t){N.setAll(e,t.payload.products)})).addCase(B.rejected,(function(e){N.removeAll(e)})).addCase(M.fulfilled,(function(e,t){N.upsertOne(e,t.payload.updated)})).addCase(D.rejected,(function(e){e.clearing=!1})).addCase(D.pending,(function(e){e.clearing=!0})).addCase(D.fulfilled,(function(e){N.removeAll(e),e.clearing=!1})).addMatcher((function(e){return e.type.endsWith("/pending")}),(function(e){e.loading=!0,e.error=null})).addMatcher((function(e){return e.type.endsWith("/fulfilled")}),(function(e){e.loading=!1,e.error=null})).addMatcher((function(e){return e.type.endsWith("/rejected")}),(function(e,t){e.loading=!1,e.error=t.error.message}))}}),J=W.reducer,G="ordered",Y="waitingForProducts";function U(e){switch(e){case G:return"ordered";case Y:return"waiting for products";default:return""}}var z,L=Object(l.c)({sortComparer:function(e,t){return t.createdAt-e.createdAt}}),Q="orders",V=function(e){return e.orders},_=L.getSelectors((function(e){return V(e)})),$=Object(l.b)("orders/fetchAllOrders",function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{condition:function(e,t){var r=t.getState,n=V(r());return 0===L.getSelectors().selectTotal(n)&&!n.loading}}),K=Object(l.b)("orders/createOrder",function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),X=Object(l.b)("orders/cancelOrder",function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Z=Object(l.b)("orders/clearOrders",Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g());case 1:case"end":return e.stop()}}),e)})))),ee=Object(l.d)({name:Q,initialState:L.getInitialState({loading:!1,error:null,latestOrder:null,clearing:!1}),reducers:{},extraReducers:function(e){e.addCase($.fulfilled,(function(e,t){L.setAll(e,t.payload.orders)})).addCase($.rejected,(function(e){L.removeAll(e)})).addCase(K.pending,(function(e){e.latestOrder=null})).addCase(K.fulfilled,(function(e,t){e.latestOrder=t.payload.order,L.addOne(e,t.payload.order)})).addCase(X.fulfilled,(function(e,t){L.removeOne(e,t.payload.deleted)})).addCase(Z.pending,(function(e){e.clearing=!0})).addCase(Z.rejected,(function(e){e.clearing=!1})).addCase(Z.fulfilled,(function(e){L.removeAll(e),e.clearing=!1})).addMatcher((function(e){return e.type.endsWith("/pending")}),(function(e){e.loading=!0,e.error=null})).addMatcher((function(e){return e.type.endsWith("/fulfilled")}),(function(e){e.loading=!1,e.error=null})).addMatcher((function(e){return e.type.endsWith("/rejected")}),(function(e,t){e.loading=!1,e.error=t.error.message}))}}),te=ee.reducer,re=Object(l.d)({name:"cart",initialState:{},reducers:{addToCart:function(e,t){var r=t.payload;e[r]|=0,e[r]++},setQuantity:function(e,t){var r=t.payload,n=r.productId,c=r.newQuantity;e[n]=c,e[n]<=0&&delete e[n]},emptyCart:function(e){return{}}}}),ne=re.actions,ce=ne.addToCart,ae=ne.emptyCart,ie=ne.setQuantity,se=function(e){return e[re.name]},oe=re.reducer,le=Object(l.a)({reducer:(z={},Object(o.a)(z,W.name,J),Object(o.a)(z,ee.name,te),Object(o.a)(z,re.name,oe),z)}),de=(r(213),r(316)),ue=r(320),je=r(41),be=r(88),he=r(13),pe=r(1),Oe=function(){var e=Object(s.c)((function(e){return function(e){return Object.keys(se(e)).length}(e)}));return Object(pe.jsx)(de.a,{children:Object(pe.jsxs)(ue.a,{stackable:!0,borderless:!0,children:[Object(pe.jsx)(me,{path:"/main",children:"Main"}),Object(pe.jsx)(me,{path:"/products",children:"Products"}),Object(pe.jsxs)(ue.a.Menu,{position:"right",children:[Object(pe.jsx)(me,{path:"/orders",children:"My Orders"}),Object(pe.jsxs)(me,{path:"/cart",children:[Object(pe.jsx)(je.a,{name:"shopping cart"}),"Shopping cart",e?Object(pe.jsx)(be.a,{circular:!0,"data-testid":"cart-numitems",children:e}):null]})]})]})})};function me(e){var t=e.path,r=e.children,n=Object(he.h)();return Object(pe.jsx)(ue.a.Item,{active:n.pathname===t,as:i.b,to:t,replace:!0,children:r})}var fe=r(331),xe=r(322),ge=r(50),ve=r(300),we=r(330),ye=r(319),Ce=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return E(e).clearing})),r=Object(s.c)((function(e){return V(e).clearing})),c=Object(n.useState)(!(null!==m.getItem(f)||null!==m.getItem(x))),a=Object(ge.a)(c,2),i=a[0],o=a[1];var l=Object(pe.jsx)(ve.a.Group,{children:Object(pe.jsx)(ve.a,{negative:!0,icon:"trash alternate",content:"Clear local storage area",onClick:function(){return o(!0),e(Z()),void e(D())},disabled:i,loading:t||r})}),d=i?Object(pe.jsxs)(we.a,{basic:!0,compact:!0,children:[Object(pe.jsx)("p",{children:"No data in this application's local storage area."}),Object(pe.jsx)("p",{children:"An easy way to load some is to visit the Products page."})]}):Object(pe.jsx)(we.a,{basic:!0,compact:!0,children:Object(pe.jsx)("p",{children:"Click to remove this application's data from the local storage area."})});return Object(pe.jsx)(ye.a,{content:d,trigger:l,on:["hover","click"],position:"bottom left"})},Ie=function(){return Object(pe.jsxs)(de.a,{style:{marginTop:"2em"},children:[Object(pe.jsx)(Ce,{}),Object(pe.jsx)(fe.a,{as:"h2",dividing:!0,children:"Demo Online Store"}),Object(pe.jsx)("p",{children:"This web application demonstrates the following features usually found in any online store website:"}),Object(pe.jsxs)(xe.a,{bulleted:!0,relaxed:!0,style:{marginTop:"2em",marginBottom:"2em"},children:[Object(pe.jsx)(xe.a.Item,{children:"A list of products can be browsed."}),Object(pe.jsx)(xe.a.Item,{children:"The details of any product can be viewed."}),Object(pe.jsx)(xe.a.Item,{children:"Products can be added into a shopping cart."}),Object(pe.jsx)(xe.a.Item,{children:"The contents of the shopping cart can be manipulated before ordering."}),Object(pe.jsx)(xe.a.Item,{children:"The list of orders can be viewed."}),Object(pe.jsx)(xe.a.Item,{children:"The details of any order can be viewed."}),Object(pe.jsx)(xe.a.Item,{children:"An order can be cancelled."}),Object(pe.jsx)(xe.a.Item,{children:"Product inventories change when orders are placed or cancelled."}),Object(pe.jsx)(xe.a.Item,{children:"A navigation bar is always visible at the top of the page."})]}),Object(pe.jsxs)("p",{children:["The application's source code lives ",Object(pe.jsx)("a",{href:"https://github.com/JormaStenman/react-redux-sui-online-store",children:"here"}),"."]}),Object(pe.jsx)(fe.a,{as:"h2",dividing:!0,children:"Implementation aspects"}),Object(pe.jsx)("p",{children:"A few implementation details worth mentioning:"}),Object(pe.jsxs)(xe.a,{bulleted:!0,relaxed:!0,style:{marginTop:"2em",marginBottom:"2em"},children:[Object(pe.jsxs)(xe.a.Item,{children:["This application is an implementation of ",Object(pe.jsx)("a",{href:"https://github.com/florinpop17/app-ideas/blob/master/Projects/2-Intermediate/Simple-Online-Store.md",children:"this app-idea"}),"."]}),Object(pe.jsxs)(xe.a.Item,{children:["The application is a ",Object(pe.jsx)("a",{href:"https://en.wikipedia.org/wiki/Single-page_application",children:"Single Page Application"})," working entirely inside the browser."]}),Object(pe.jsxs)(xe.a.Item,{children:["The application currently has no database integration. Instead, it stores all product and order data in ",Object(pe.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage",children:"the local storage area"})," of the user's browser. There's a button to explicitly clear this application's local storage area at the top of this page."]}),Object(pe.jsxs)(xe.a.Item,{children:["A client library, which simulates asynchronous client-server communication using ",Object(pe.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",children:"Promises"}),", is used between the app state and the actual storage area."]})]}),Object(pe.jsx)(fe.a,{as:"h2",dividing:!0,children:"Implementation techniques"}),Object(pe.jsx)("p",{children:"The application utilizes the following techniques and libraries:"}),Object(pe.jsxs)(xe.a,{bulleted:!0,relaxed:!0,style:{marginTop:"2em",marginBottom:"2em"},children:[Object(pe.jsxs)(xe.a.Item,{children:["All code is ",Object(pe.jsx)("a",{href:"https://www.w3schools.com/Js/js_2018.asp",children:"ECMAScript 2018"}),"."]}),Object(pe.jsxs)(xe.a.Item,{children:["The initial project structure was created using ",Object(pe.jsx)("a",{href:"https://create-react-app.dev",children:"Create React App"})," with ",Object(pe.jsx)("a",{href:"https://www.npmjs.com/package/cra-template-redux",children:"the Redux template"}),"."]}),Object(pe.jsxs)(xe.a.Item,{children:["All components are ",Object(pe.jsx)("a",{href:"https://reactjs.org/docs/components-and-props.html",children:"React Function Components"}),"."]}),Object(pe.jsxs)(xe.a.Item,{children:["Application state is managed using ",Object(pe.jsx)("a",{href:"https://reactjs.org/docs/hooks-intro.html",children:"React Hooks"})," and ",Object(pe.jsx)("a",{href:"https://redux-toolkit.js.org",children:"Redux Toolkit"}),"."]}),Object(pe.jsxs)(xe.a.Item,{children:["Navigation within the application is managed by ",Object(pe.jsx)("a",{href:"https://reactrouter.com",children:"React Router"}),"."]}),Object(pe.jsxs)(xe.a.Item,{children:["UI components come from ",Object(pe.jsx)("a",{href:"https://react.semantic-ui.com",children:"Semantic UI React"})]}),Object(pe.jsxs)(xe.a.Item,{children:["Some utility functions from ",Object(pe.jsx)("a",{href:"https://lodash.com",children:"Lodash"})," are used."]}),Object(pe.jsxs)(xe.a.Item,{children:["Unit tests were written using ",Object(pe.jsx)("a",{href:"https://jestjs.io",children:"Jest"})," and ",Object(pe.jsx)("a",{href:"https://testing-library.com/docs/react-testing-library/intro/",children:"React Testing Library"}),"."]})]}),Object(pe.jsx)(fe.a,{as:"h2",dividing:!0,children:"What next?"}),Object(pe.jsx)("p",{children:"The app is pretty basic in its current state. Here are some ideas of what to add next:"}),Object(pe.jsxs)(xe.a,{bulleted:!0,relaxed:!0,style:{marginTop:"2em",marginBottom:"2em"},children:[Object(pe.jsxs)(xe.a.Item,{children:["As the main purpose of developing this app was to explore ",Object(pe.jsx)("a",{href:"https://reactjs.org",children:"React"})," and related technologies, and time was limited, the unit tests are not as comprehensive as they could be."]}),Object(pe.jsx)(xe.a.Item,{children:"There's no login/logout functionality for users."}),Object(pe.jsx)(xe.a.Item,{children:"Could use a real database with a backend service."}),Object(pe.jsx)(xe.a.Item,{children:"The app only speaks English. It could do with some l10n love."}),Object(pe.jsx)(xe.a.Item,{children:"Neither the products nor the orders listings are paged."})]}),Object(pe.jsx)(fe.a,{as:"h2",dividing:!0,children:"Image credits"}),Object(pe.jsxs)("p",{children:["The images used in this app were downloaded from ",Object(pe.jsx)("a",{href:"https://creativecommons.org",children:"the Creative Commons website"}),". Here are the credits to their creators:"]}),Object(pe.jsxs)(xe.a,{bulleted:!0,relaxed:!0,style:{marginTop:"2em",marginBottom:"2em"},children:[Object(pe.jsxs)(xe.a.Item,{children:['"Fruit salad" by lisaclarke is licensed with CC BY-ND 2.0. To view a copy of this license, visit \xa0',Object(pe.jsx)("a",{href:"https://creativecommons.org/licenses/by-nd/2.0/",children:"https://creativecommons.org/licenses/by-nd/2.0/"})]}),Object(pe.jsxs)(xe.a.Item,{children:['"Fruit Veggie Art" by NicoleMariePhotoworks is licensed with CC BY 2.0. To view a copy of this license, visit ',Object(pe.jsx)("a",{href:"https://creativecommons.org/licenses/by/2.0/",children:"https://creativecommons.org/licenses/by/2.0/"})]}),Object(pe.jsx)(xe.a.Item,{children:'"Fruit for a crisp" by lisaclarke is licensed under CC BY-ND 2.0'}),Object(pe.jsx)(xe.a.Item,{children:'"Fruits on a plate (testing iPhone 6+)" by Sergey Galyonkin is licensed under CC BY-SA 2.0'}),Object(pe.jsx)(xe.a.Item,{children:'"#napoli #market #antignano #frutta #fruits #clementine" by Antonio Manfredonio is licensed under CC BY-SA 2.0'}),Object(pe.jsx)(xe.a.Item,{children:'"strawberries" by seelensturm is licensed under CC BY 2.0'}),Object(pe.jsx)(xe.a.Item,{children:'"File:Grapes Emoji.png" by EmmanuelCordoliani is licensed under CC BY-SA 4.0'})]})]})},ke=r(325),Se=r(332),Ae=r(184),Te=r(323),qe=r(326);function Pe(e){return"".concat("/react-redux-sui-online-store","/product_pics/").concat(e,".jpeg")}var Re=new Intl.NumberFormat("fi-FI",{style:"currency",currency:"EUR"}),Ne=function(e){var t=e.render,r=e.modalOpen,c=e.setModalOpen,a=e.timeout;return Object(n.useEffect)((function(){var e=null;return a&&(e=setTimeout((function(){return c(!1)}),a)),function(){return e&&clearTimeout(e)}})),Object(pe.jsx)(Te.a,{closeIcon:!0,onClose:function(){return c(!1)},open:r,children:t()})},Fe=r(317);function Ee(e){var t=e.what;return Object(pe.jsx)(Fe.a,{active:!0,content:"Loading ".concat(t,"...")})}var He=function(){var e=Object(he.i)(),t=Object(s.c)((function(t){return H.selectById(t,e.params.productId)})),r=Object(s.c)((function(e){return E(e).loading})),c=Object(s.c)((function(e){return E(e).error})),a=Object(s.b)(),o=Object(n.useState)(!1),l=Object(ge.a)(o,2),d=l[0],u=l[1];return Object(n.useEffect)((function(){a(B())}),[a]),t?Object(pe.jsxs)(de.a,{children:[Object(pe.jsx)(ke.a,{centered:!0,fluid:!0,children:Object(pe.jsxs)(Se.a,{stackable:!0,container:!0,children:[Object(pe.jsx)(Se.a.Row,{children:Object(pe.jsx)(Se.a.Column,{children:Object(pe.jsxs)(ke.a.Header,{children:[Object(pe.jsx)("span",{className:"meta",children:t.id}),Object(pe.jsx)("span",{children:"\xa0"}),Object(pe.jsx)("span",{children:t.name})]})})}),Object(pe.jsxs)(Se.a.Row,{children:[Object(pe.jsx)(Se.a.Column,{width:"3",children:Object(pe.jsx)(Ae.a,{size:"small",inline:!0,src:Pe(t.id)})}),Object(pe.jsxs)(Se.a.Column,{width:"13",textAlign:"justified",children:[Object(pe.jsxs)(ke.a.Content,{children:[Object(pe.jsx)(ke.a.Meta,{children:Object(pe.jsx)("span",{className:"price",children:Re.format(t.price||0)})}),Object(pe.jsx)(ke.a.Description,{children:t.details})]}),Object(pe.jsx)(ke.a.Content,{extra:!0,children:Object(pe.jsx)(ke.a.Meta,{children:Object(pe.jsxs)("span",{children:["In stock: ",t.inventory]})})})]})]}),Object(pe.jsx)(Se.a.Row,{children:Object(pe.jsx)(Se.a.Column,{children:Object(pe.jsxs)(ve.a.Group,{children:[Object(pe.jsx)(ve.a,{icon:"arrow alternate circle left outline",content:"See more products",as:i.b,to:"/products"}),Object(pe.jsx)(ve.a,{primary:!0,icon:"add to cart",content:"Add to cart",onClick:function(){return t=e.params.productId,a(ce(t)),void u(!0);var t}})]})})})]})}),Object(pe.jsx)(Ne,{modalOpen:d,setModalOpen:u,timeout:5e3,render:function(){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsxs)(Te.a.Header,{children:['One of "',Object(pe.jsx)("i",{children:t.name}),'" added in ',Object(pe.jsx)(i.b,{to:"/cart",replace:!0,children:"cart"}),"."]}),Object(pe.jsx)(Te.a.Content,{children:Object(pe.jsx)(Ae.a,{size:"tiny",inline:!0,src:Pe(t.id)})})]})}})]}):r?Object(pe.jsx)(Ee,{what:"product"}):c?Object(pe.jsx)(qe.a,{error:!0,content:c}):null},Be=r(321),Me=r(109),De=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return H.selectAll(e)})),r=Object(s.c)((function(e){return E(e).loading})),c=Object(s.c)((function(e){return E(e).error}));return Object(n.useEffect)((function(){e(B())}),[e]),t&&t.length?Object(pe.jsx)(Be.a.Group,{divided:!0,children:t.map((function(e){return Object(pe.jsxs)(Be.a,{as:i.b,to:function(t){return r=t,n=e.id,Object(b.a)(Object(b.a)({},r),{},{pathname:"".concat(r.pathname,"/").concat(n)});var r,n},children:[Object(pe.jsx)(Be.a.Image,{size:"tiny",src:Pe(e.id),alt:"product-id-".concat(e.id)}),Object(pe.jsxs)(Be.a.Content,{children:[Object(pe.jsx)(Be.a.Header,{children:e.name}),Object(pe.jsx)(Be.a.Meta,{children:Object(pe.jsx)("span",{className:"price",children:Re.format(e.price||0)})}),Object(pe.jsx)(Be.a.Description,{children:Object(Me.truncate)(e.details,{length:200})}),Object(pe.jsx)(Be.a.Extra,{children:Object(pe.jsx)(ve.a,{children:"Select"})})]})]},e.id)}))}):r?Object(pe.jsx)(Ee,{what:"products"}):c?Object(pe.jsx)(qe.a,{error:!0,content:c}):null},We=r(324),Je=r(318);function Ge(e){var t=e.productId,r=Object(s.c)((function(e){return H.selectById(e,parseInt(t))})),n=Object(s.c)((function(e){return se(e)[r.id]})),c=Object(s.b)();function a(e){var t=parseInt(e.target.value);c(ie({productId:r.id,newQuantity:t}))}return r?Object(pe.jsxs)(We.a.Row,{children:[Object(pe.jsx)(We.a.Cell,{children:Object(pe.jsx)(i.b,{to:"/products/".concat(r.id),children:r.id})}),Object(pe.jsx)(We.a.Cell,{children:r.name}),Object(pe.jsx)(We.a.Cell,{children:Re.format(r.price||0)}),Object(pe.jsx)(We.a.Cell,{children:Object(pe.jsx)(Je.a,{fluid:!0,label:Object(pe.jsx)(ve.a,{icon:"remove",onClick:function(){return a({target:{value:0}})},title:"remove"}),type:"number",min:1,max:r.inventory,defaultValue:isNaN(n)?1:n,onChange:a})})]}):null}function Ye(){var e=Object(s.c)((function(e){return se(e)})),t=Object(s.c)((function(e){return H.selectEntities(e)})),r=Object.keys(e).reduce((function(r,n){var c=e[n];return r+(isNaN(c)?0:c)*t[parseInt(n)].price}),0);return Object(pe.jsxs)("span",{children:["Cart total:\xa0",Object(pe.jsx)("strong",{children:Re.format(r)})]})}var Ue=function(){var e=Object(s.c)((function(e){return se(e)})),t=Object(s.b)(),r=Object(s.c)((function(e){return H.selectEntities(e)})),c=Object(n.useState)(!1),a=Object(ge.a)(c,2),o=a[0],l=a[1],d=Object(s.c)((function(e){return function(e){return V(e).latestOrder}(e)}));return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsxs)(We.a,{striped:!0,children:[Object(pe.jsx)(We.a.Header,{children:Object(pe.jsxs)(We.a.Row,{children:[Object(pe.jsx)(We.a.HeaderCell,{width:"1",children:"ID"}),Object(pe.jsx)(We.a.HeaderCell,{width:"10",children:"Name"}),Object(pe.jsx)(We.a.HeaderCell,{width:"3",children:"Unit Price"}),Object(pe.jsx)(We.a.HeaderCell,{width:"2",children:"Quantity"})]})}),Object(pe.jsx)(We.a.Body,{children:Object.keys(e).map((function(e){return Object(pe.jsx)(Ge,{productId:e},e)}))}),Object(pe.jsx)(We.a.Footer,{children:Object(pe.jsx)(We.a.Row,{children:Object(pe.jsx)(We.a.HeaderCell,{colSpan:"4",children:Object(pe.jsx)(Ye,{})})})})]}),Object(pe.jsxs)(ve.a.Group,{children:[Object(pe.jsx)(ve.a,{as:i.b,content:"See more products",icon:"arrow alternate circle left outline",to:"/products"}),Object(pe.jsx)(ve.a,{content:"Cancel order",disabled:0===Object.keys(e).length,icon:"trash alternate",negative:!0,onClick:function(){return t(ae())}}),Object(pe.jsx)(ve.a,{content:"Place order",disabled:0===Object.keys(e).length,icon:"share square",onClick:function(){t(K(Object.keys(e).reduce((function(n,c){var a=r[parseInt(c)],i=e[c],s=a.inventory-i;return n.products[c]||(n.products[c]={unitPrice:a.price,quantity:i}),n.status!==Y&&(n.status=s<0?Y:G),t(M({productId:a.id,quantity:-i})),n}),{products:{}}))),t(ae()),l(!0)},primary:!0})]}),d?Object(pe.jsx)(Ne,{modalOpen:o,setModalOpen:l,render:function(){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(Te.a.Header,{children:"Thank you for your order!"}),Object(pe.jsx)(Te.a.Content,{children:Object(pe.jsxs)(we.a.Group,{children:[Object(pe.jsx)(we.a.Inline,{children:Object(pe.jsx)(i.b,{to:"/orders/".concat(d.id),replace:!0,children:"View this order."})}),Object(pe.jsxs)(we.a.Inline,{children:["You can view all your orders on the ",Object(pe.jsx)(i.b,{to:"/orders",replace:!0,children:"Orders page"})]})]})})]})}}):o?Object(pe.jsx)(Ee,{what:"order"}):null]})},ze=r(327);function Le(e){var t=e.order,r=Object(he.h)(),c=Object(s.b)(),a=Object(s.c)((function(e){return H.selectEntities(e)})),o=Object(s.c)((function(e){return E(e).loading})),l=Object(s.c)((function(e){return E(e).error}));Object(n.useEffect)((function(){c(B())}),[c]);var d="".concat(r.pathname,"/").concat(t.id);return Object(pe.jsxs)(We.a.Row,{children:[Object(pe.jsx)(We.a.Cell,{children:t.date}),Object(pe.jsx)(We.a.Cell,{children:U(t.status)}),Object(pe.jsx)(We.a.Cell,{children:Object(pe.jsx)(i.b,{to:d,children:t.id})}),Object(pe.jsx)(We.a.Cell,{children:o?Object(pe.jsxs)(ze.a,{fluid:!0,children:[Object(pe.jsx)(ze.a.Line,{}),Object(pe.jsx)(ze.a.Line,{})]}):l?Object(pe.jsx)(qe.a,{error:!0,content:l}):Object.keys(t.products).map((function(e){var t=a[parseInt(e)];return t?Object(Me.truncate)(t.name,{length:20}):""})).join(", ")})]})}var Qe=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return _.selectAll(e)})),r=Object(s.c)((function(e){return V(e).loading})),c=Object(s.c)((function(e){return V(e).error}));return Object(n.useEffect)((function(){e($())}),[e]),r?Object(pe.jsx)(Ee,{what:"orders"}):c?Object(pe.jsx)(qe.a,{error:!0,content:c}):t?0===t.length?Object(pe.jsx)(qe.a,{success:!0,children:"You have no orders."}):Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)(We.a,{striped:!0,children:[Object(pe.jsx)(We.a.Header,{children:Object(pe.jsxs)(We.a.Row,{children:[Object(pe.jsx)(We.a.HeaderCell,{width:2,children:"Date"}),Object(pe.jsx)(We.a.HeaderCell,{width:3,children:"Status"}),Object(pe.jsx)(We.a.HeaderCell,{width:5,children:"ID"}),Object(pe.jsx)(We.a.HeaderCell,{width:6,children:"Contents"})]})}),Object(pe.jsx)(We.a.Body,{children:t.map((function(e){return Object(pe.jsx)(Le,{order:e},e.id)}))})]})}):null};function Ve(e){var t=e.order,r=e.productId,c=Object(s.b)(),a=Object(s.c)((function(e){return H.selectById(e,r)})),o=Object(s.c)((function(e){return E(e).loading})),l=Object(s.c)((function(e){return E(e).error}));return Object(n.useEffect)((function(){c(B())})),Object(pe.jsxs)(We.a.Row,{children:[Object(pe.jsx)(We.a.Cell,{children:Object(pe.jsxs)(i.b,{to:"/products/".concat(r),children:[Object(pe.jsx)(Ae.a,{size:"tiny",inline:!0,src:Pe(r)}),"\xa0",o?Object(pe.jsx)(ze.a,{fluid:!0,children:Object(pe.jsx)(ze.a.Line,{})}):l?Object(pe.jsx)(qe.a,{error:!0,content:l}):a?a.name:void 0]})}),Object(pe.jsx)(We.a.Cell,{children:t.products[r].quantity}),Object(pe.jsx)(We.a.Cell,{children:Object(pe.jsx)("span",{className:"price",children:Re.format(t.products[r].unitPrice)})})]})}var _e=function(){var e=Object(s.b)(),t=Object(he.i)(),r=Object(he.g)(),c=Object(n.useState)(0),a=Object(ge.a)(c,2),o=a[0],l=a[1],d=Object(s.c)((function(e){return _.selectById(e,t.params.orderId)})),u=Object(s.c)((function(e){return V(e).loading})),j=Object(s.c)((function(e){return V(e).error}));function b(){e(X(d.id)),Object.keys(d.products).forEach((function(t){e(M({productId:parseInt(t),quantity:d.products[t].quantity}))})),r.replace("/orders")}return Object(n.useEffect)((function(){e($())})),Object(n.useEffect)((function(){if(d&&d.products){var e=Object.keys(d.products);e&&e.length&&l(e.reduce((function(e,t){var r=d.products[t];return e+r.quantity*r.unitPrice}),0))}}),[d]),u?Object(pe.jsx)(Ee,{what:"order"}):j?Object(pe.jsx)(qe.a,{error:!0,content:j}):d?Object(pe.jsxs)(Se.a,{celled:!0,container:!0,children:[Object(pe.jsxs)(Se.a.Row,{children:[Object(pe.jsxs)(Se.a.Column,{width:6,children:["Order id: ",Object(pe.jsx)("b",{children:d.id})]}),Object(pe.jsxs)(Se.a.Column,{width:4,children:["Order date: ",d.date]}),Object(pe.jsxs)(Se.a.Column,{width:6,children:["Order status: ",U(d.status)]})]}),Object(pe.jsx)(Se.a.Row,{children:Object(pe.jsx)(Se.a.Column,{width:16,children:Object(pe.jsxs)(We.a,{striped:!0,children:[Object(pe.jsx)(We.a.Header,{children:Object(pe.jsxs)(We.a.Row,{children:[Object(pe.jsx)(We.a.HeaderCell,{width:10,children:"Product"}),Object(pe.jsx)(We.a.HeaderCell,{width:3,children:"Quantity"}),Object(pe.jsx)(We.a.HeaderCell,{width:3,children:"Unit Price"})]})}),Object(pe.jsx)(We.a.Body,{children:Object.keys(d.products).map((function(e){return Object(pe.jsx)(Ve,{order:d,productId:e},e)}))})]})})}),Object(pe.jsxs)(Se.a.Row,{children:[Object(pe.jsxs)(Se.a.Column,{width:10,children:["Order total:\xa0",Object(pe.jsx)("b",{children:Object(pe.jsx)("span",{className:"price",children:Re.format(o)})})]}),Object(pe.jsx)(Se.a.Column,{width:6,children:Object(pe.jsxs)(ve.a.Group,{fluid:!0,children:[Object(pe.jsx)(ve.a,{icon:"arrow alternate circle left outline",content:"All orders",as:i.b,to:"/orders"}),Object(pe.jsx)(ve.a,{icon:"trash alternate",negative:!0,onClick:function(){return b(d.id)},content:"Cancel order"})]})})]})]}):null};function $e(){return Object(pe.jsxs)(de.a,{children:[Object(pe.jsx)(Oe,{}),Object(pe.jsxs)(he.d,{children:[Object(pe.jsx)(he.b,{path:"/orders/:orderId",children:Object(pe.jsx)(_e,{})}),Object(pe.jsx)(he.b,{path:"/orders",children:Object(pe.jsx)(Qe,{})}),Object(pe.jsx)(he.b,{path:"/cart",children:Object(pe.jsx)(Ue,{})}),Object(pe.jsx)(he.b,{path:"/main",children:Object(pe.jsx)(Ie,{})}),Object(pe.jsx)(he.b,{path:"/products/:productId",children:Object(pe.jsx)(He,{})}),Object(pe.jsx)(he.b,{path:"/products",children:Object(pe.jsx)(De,{})}),Object(pe.jsx)(he.b,{path:"/",children:Object(pe.jsx)(he.a,{to:"/main"})})]})]})}var Ke=function(){return Object(pe.jsx)(i.a,{children:Object(pe.jsx)(s.a,{store:le,children:Object(pe.jsx)($e,{})})})};a.a.render(Object(pe.jsx)(Ke,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[299,1,2]]]);
//# sourceMappingURL=main.6f9fdf17.chunk.js.map